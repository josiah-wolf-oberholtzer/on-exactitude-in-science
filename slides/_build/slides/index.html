<!DOCTYPE html>


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Mapping Recorded Music &mdash; Mapping Recorded Music History 2021.09.03 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles.css" type="text/css" />
    <link rel="stylesheet" href="_static/slides.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
    
    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/slides.css" type="text/css" />
    <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2021.09.03',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/common.js"></script>
    
    <script type="text/javascript" src="_static/slides.js"></script>
    <script type="text/javascript" src="_static/sync.js"></script>
    <script type="text/javascript" src="_static/controller.js"></script>
    <script type="text/javascript" src="_static/init.js"></script>
    
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Mapping Recorded Music History 2021.09.03 documentation" href="#" /> 
  </head>
  <body>

<section
   id="slide_container"
   class='slides layout-regular'>


  
<article class="slide level-1" id="mapping-recorded-music">

<h1>Mapping Recorded Music</h1>





</article>
<article class="slide level-2" id="howdy">

<h2>Howdy</h2>





</article>
<article class="slide level-3" id="who-i-am">

<h3>Who I am</h3>

<ul class="simple">
<li>Make my coin as a software engineer</li>
<li>My background is in the arts and music industry</li>
<li>Currently in Kingston, NY</li>
</ul>




</article>
<article class="slide level-3" id="id1">

<h3>Who I am</h3>

<ul class="simple">
<li>Oberlin: BMus in composition</li>
<li>Forced Exposure: music distribution</li>
<li>Harvard: masters / PhD in composition</li>
<li>Music21 &#64; MIT: toolkit for digital musicology</li>
<li>Discogs: music database / marketplace</li>
<li>CapitalOne: banking core modernization</li>
</ul>




</article>
<article class="slide level-3" id="a-cute-dog">

<h3>A cute dog</h3>

<div class="figure align-default">
<img alt="_images/bradley.jpg" class="fill" src="_images/bradley.jpg" />
</div>




</article>
<article class="slide level-2" id="musical-maps">

<h2>Musical maps</h2>





</article>
<article class="slide level-3" id="state-of-play">

<h3>State of play</h3>

<ul class="simple">
<li>A variety of musical maps exist today</li>
<li>Some are interactive, some aren’t</li>
<li>Most are concerned with concepts of “genre”, “style”, “period” and how these
categories mutate into other categories, and generate new categories</li>
<li><em>But</em>, they almost all represent music history as a graph</li>
</ul>




</article>
<article class="slide level-3" id="id2">

<h3>“”</h3>

<div class="figure align-default">
<img alt="_images/map-of-metal.png" class="fill" src="_images/map-of-metal.png" />
</div>




</article>
<article class="slide level-3" id="id3">

<h3>“”</h3>

<div class="figure align-default">
<img alt="_images/map-of-every-noise.png" class="fill" src="_images/map-of-every-noise.png" />
</div>




</article>
<article class="slide level-3" id="id4">

<h3>“”</h3>

<div class="figure align-default">
<img alt="_images/map-of-acid.jpg" class="fill" src="_images/map-of-acid.jpg" />
</div>




</article>
<article class="slide level-3" id="id5">

<h3>“”</h3>

<div class="figure align-default">
<img alt="_images/map-of-ishkur.png" class="fill" src="_images/map-of-ishkur.png" />
</div>




</article>
<article class="slide level-3" id="lossy-abstractions">

<h3>Lossy abstractions</h3>

<ul class="simple">
<li>Abstract categorizations are highly subjective</li>
<li>They elide really interesting information:<ul>
<li>Who collaborated with who?</li>
<li>Who curated or published who, and when?</li>
<li>How do multiple labels’ curation overlap to create the “moire” effect that
we want to recognize as style?</li>
</ul>
</li>
</ul>




</article>
<article class="slide level-3" id="materialist-view-of-history">

<h3>Materialist view of history</h3>

<ul class="simple">
<li>Style, and genre don’t exist</li>
<li>But humans and the artifacts of their production do</li>
<li>Specific artists, companies, releases and songs</li>
<li>Specific years, countries and formats</li>
<li>What if we could map these concrete interactions?</li>
</ul>




</article>
<article class="slide level-3" id="we-have-the-data">

<h3>We have the data</h3>

<ul class="simple">
<li><a class="reference external" href="https://discogs.com">https://discogs.com</a> Discographic Dataset</li>
<li><a class="reference external" href="http://data.discogs.com/">http://data.discogs.com/</a></li>
<li>Monthly XML dumps</li>
<li>CC-0 licensed</li>
<li>1.7 million companies</li>
<li>7.7 million artists</li>
<li>14.3 million releases</li>
<li>1.9 million “masters”</li>
</ul>




</article>
<article class="slide level-3" id="id6">

<h3>We have the data</h3>

<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">artist</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">images</span><span class="o">&gt;...&lt;/</span><span class="n">images</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="mi">8</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">Mood</span> <span class="n">II</span> <span class="n">Swing</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">realname</span><span class="o">&gt;</span><span class="n">John</span> <span class="n">Ciafone</span> <span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span> <span class="n">Lem</span> <span class="n">Springsteen</span><span class="o">&lt;/</span><span class="n">realname</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">profile</span><span class="o">&gt;...&lt;/</span><span class="n">profile</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">namevariations</span><span class="o">&gt;&lt;</span><span class="n">name</span><span class="o">&gt;...&lt;/</span><span class="n">name</span><span class="o">&gt;&lt;/</span><span class="n">namevariations</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">aliases</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;26498&quot;</span><span class="o">&gt;</span><span class="n">Chronic</span> <span class="n">Sounds</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;34749&quot;</span><span class="o">&gt;</span><span class="n">Urbanized</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">...</span>
  <span class="o">&lt;/</span><span class="n">aliases</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">members</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="mi">12186</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;12186&quot;</span><span class="o">&gt;</span><span class="n">John</span> <span class="n">Ciafone</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="mi">27959</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;27959&quot;</span><span class="o">&gt;</span><span class="n">Lem</span> <span class="n">Springsteen</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">members</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">artist</span><span class="o">&gt;</span>
</pre></div>
</div>




</article>
<article class="slide level-3" id="id7">

<h3>We have the data</h3>

<div align="center" class="align-center"><div class="graphviz"><img src="_images/graphviz-a42339152af5d814bf164304faa15e74241e7fe3.png" alt="digraph G {
     a1 [label=&quot;Mood II Swing&quot;]
     a2 [label=&quot;Chronic Sounds&quot;]
     a3 [label=&quot;Urbanized&quot;]
     a4 [label=&quot;John Ciafone&quot;]
     a5 [label=&quot;Lem Springsteen&quot;]
     a1 -&gt; a2 [dir=both,label=&quot;alias&quot;]
     a1 -&gt; a3 [dir=both,label=&quot;alias&quot;]
     a4 -&gt; a1 [label=&quot;member&quot;]
     a5 -&gt; a1 [label=&quot;member&quot;]
 }" class="graphviz" /></div>
</div>




</article>
<article class="slide level-3" id="id8">

<h3>We have the data</h3>

<div class="overflow highlight-xml notranslate"><div class="highlight"><pre><span></span> <span class="nt">&lt;release</span> <span class="na">id=</span><span class="s">&quot;9&quot;</span> <span class="na">status=</span><span class="s">&quot;Accepted&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;images&gt;</span>
     <span class="nt">&lt;image</span> <span class="na">type=</span><span class="s">&quot;primary&quot;</span> <span class="na">uri=</span><span class="s">&quot;&quot;</span> <span class="na">uri150=</span><span class="s">&quot;&quot;</span> <span class="na">width=</span><span class="s">&quot;592&quot;</span> <span class="na">height=</span><span class="s">&quot;600&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;image</span> <span class="na">type=</span><span class="s">&quot;secondary&quot;</span> <span class="na">uri=</span><span class="s">&quot;&quot;</span> <span class="na">uri150=</span><span class="s">&quot;&quot;</span> <span class="na">width=</span><span class="s">&quot;600&quot;</span> <span class="na">height=</span><span class="s">&quot;599&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;image</span> <span class="na">type=</span><span class="s">&quot;secondary&quot;</span> <span class="na">uri=</span><span class="s">&quot;&quot;</span> <span class="na">uri150=</span><span class="s">&quot;&quot;</span> <span class="na">width=</span><span class="s">&quot;600&quot;</span> <span class="na">height=</span><span class="s">&quot;602&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;image</span> <span class="na">type=</span><span class="s">&quot;secondary&quot;</span> <span class="na">uri=</span><span class="s">&quot;&quot;</span> <span class="na">uri150=</span><span class="s">&quot;&quot;</span> <span class="na">width=</span><span class="s">&quot;600&quot;</span> <span class="na">height=</span><span class="s">&quot;599&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/images&gt;</span>
   <span class="nt">&lt;artists&gt;</span>
     <span class="nt">&lt;artist&gt;</span>
       <span class="nt">&lt;id&gt;</span>33<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Blue Six<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;anv/&gt;</span>
       <span class="nt">&lt;join/&gt;</span>
       <span class="nt">&lt;role/&gt;</span>
       <span class="nt">&lt;tracks/&gt;</span>
     <span class="nt">&lt;/artist&gt;</span>
   <span class="nt">&lt;/artists&gt;</span>
   <span class="nt">&lt;title&gt;</span>Pure<span class="nt">&lt;/title&gt;</span>
   <span class="nt">&lt;labels&gt;</span>
     <span class="nt">&lt;label</span> <span class="na">name=</span><span class="s">&quot;Naked Music Recordings&quot;</span> <span class="na">catno=</span><span class="s">&quot;NM008&quot;</span> <span class="na">id=</span><span class="s">&quot;10&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/labels&gt;</span>
   <span class="nt">&lt;extraartists&gt;</span>
     <span class="nt">&lt;artist&gt;</span>
       <span class="nt">&lt;id&gt;</span>74994<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Bruno Ybarra<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;anv/&gt;</span>
       <span class="nt">&lt;join/&gt;</span>
       <span class="nt">&lt;role&gt;</span>Executive-Producer<span class="nt">&lt;/role&gt;</span>
       <span class="nt">&lt;tracks/&gt;</span>
     <span class="nt">&lt;/artist&gt;</span>
     <span class="nt">&lt;artist&gt;</span>
       <span class="nt">&lt;id&gt;</span>209463<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>David Boonshoft<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;anv&gt;</span>Dave Boonshoft<span class="nt">&lt;/anv&gt;</span>
       <span class="nt">&lt;join/&gt;</span>
       <span class="nt">&lt;role&gt;</span>Executive-Producer<span class="nt">&lt;/role&gt;</span>
       <span class="nt">&lt;tracks/&gt;</span>
     <span class="nt">&lt;/artist&gt;</span>
     <span class="nt">&lt;artist&gt;</span>
       <span class="nt">&lt;id&gt;</span>99026<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Monique Bingham<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;anv&gt;</span>Monique<span class="nt">&lt;/anv&gt;</span>
       <span class="nt">&lt;join/&gt;</span>
       <span class="nt">&lt;role&gt;</span>Featuring, Vocals<span class="nt">&lt;/role&gt;</span>
       <span class="nt">&lt;tracks/&gt;</span>
     <span class="nt">&lt;/artist&gt;</span>
     <span class="nt">&lt;artist&gt;</span>
       <span class="nt">&lt;id&gt;</span>32<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Jay Denes<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;anv&gt;</span>J. Denes<span class="nt">&lt;/anv&gt;</span>
       <span class="nt">&lt;join/&gt;</span>
       <span class="nt">&lt;role&gt;</span>Producer, Arranged By<span class="nt">&lt;/role&gt;</span>
       <span class="nt">&lt;tracks/&gt;</span>
     <span class="nt">&lt;/artist&gt;</span>
     <span class="nt">&lt;artist&gt;</span>
       <span class="nt">&lt;id&gt;</span>32<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Jay Denes<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;anv&gt;</span>J. Denes<span class="nt">&lt;/anv&gt;</span>
       <span class="nt">&lt;join/&gt;</span>
       <span class="nt">&lt;role&gt;</span>Written-By<span class="nt">&lt;/role&gt;</span>
       <span class="nt">&lt;tracks/&gt;</span>
     <span class="nt">&lt;/artist&gt;</span>
     <span class="nt">&lt;artist&gt;</span>
       <span class="nt">&lt;id&gt;</span>99026<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Monique Bingham<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;anv&gt;</span>M. Bingham<span class="nt">&lt;/anv&gt;</span>
       <span class="nt">&lt;join/&gt;</span>
       <span class="nt">&lt;role&gt;</span>Written-By<span class="nt">&lt;/role&gt;</span>
       <span class="nt">&lt;tracks/&gt;</span>
     <span class="nt">&lt;/artist&gt;</span>
   <span class="nt">&lt;/extraartists&gt;</span>
   <span class="nt">&lt;formats&gt;</span>
     <span class="nt">&lt;format</span> <span class="na">name=</span><span class="s">&quot;Vinyl&quot;</span> <span class="na">qty=</span><span class="s">&quot;1&quot;</span> <span class="na">text=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;descriptions&gt;</span>
         <span class="nt">&lt;description&gt;</span>12&quot;<span class="nt">&lt;/description&gt;</span>
         <span class="nt">&lt;description&gt;</span>33 ⅓ RPM<span class="nt">&lt;/description&gt;</span>
       <span class="nt">&lt;/descriptions&gt;</span>
     <span class="nt">&lt;/format&gt;</span>
   <span class="nt">&lt;/formats&gt;</span>
   <span class="nt">&lt;genres&gt;</span>
     <span class="nt">&lt;genre&gt;</span>Electronic<span class="nt">&lt;/genre&gt;</span>
   <span class="nt">&lt;/genres&gt;</span>
   <span class="nt">&lt;styles&gt;</span>
     <span class="nt">&lt;style&gt;</span>House<span class="nt">&lt;/style&gt;</span>
     <span class="nt">&lt;style&gt;</span>Deep House<span class="nt">&lt;/style&gt;</span>
   <span class="nt">&lt;/styles&gt;</span>
   <span class="nt">&lt;country&gt;</span>US<span class="nt">&lt;/country&gt;</span>
   <span class="nt">&lt;released&gt;</span>2000<span class="nt">&lt;/released&gt;</span>
   <span class="nt">&lt;notes&gt;</span>Track A1: engineered at Moulton Street/SF.
 Track A2: original version written for Naked Music Recordings.
 C <span class="ni">&amp;amp;</span> P Fur <span class="ni">&amp;amp;</span> Femur Music (BMI)/M. Bingham (ASCAP) 2000.
 Naked Music NYC Recordings, LLC<span class="nt">&lt;/notes&gt;</span>
   <span class="nt">&lt;data_quality&gt;</span>Correct<span class="nt">&lt;/data_quality&gt;</span>
   <span class="nt">&lt;master_id</span> <span class="na">is_main_release=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>595959<span class="nt">&lt;/master_id&gt;</span>
   <span class="nt">&lt;tracklist&gt;</span>
     <span class="nt">&lt;track&gt;</span>
       <span class="nt">&lt;position&gt;</span>A1<span class="nt">&lt;/position&gt;</span>
       <span class="nt">&lt;title&gt;</span>Pure (Mig&#39;s Petalpusher Vocal)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;duration&gt;</span>7:02<span class="nt">&lt;/duration&gt;</span>
       <span class="nt">&lt;extraartists&gt;</span>
         <span class="nt">&lt;artist&gt;</span>
           <span class="nt">&lt;id&gt;</span>9571<span class="nt">&lt;/id&gt;</span>
           <span class="nt">&lt;name&gt;</span>Jay-J<span class="nt">&lt;/name&gt;</span>
           <span class="nt">&lt;anv/&gt;</span>
           <span class="nt">&lt;join/&gt;</span>
           <span class="nt">&lt;role&gt;</span>Engineer<span class="nt">&lt;/role&gt;</span>
           <span class="nt">&lt;tracks/&gt;</span>
         <span class="nt">&lt;/artist&gt;</span>
         <span class="nt">&lt;artist&gt;</span>
           <span class="nt">&lt;id&gt;</span>669<span class="nt">&lt;/id&gt;</span>
           <span class="nt">&lt;name&gt;</span>Petalpusher<span class="nt">&lt;/name&gt;</span>
           <span class="nt">&lt;anv/&gt;</span>
           <span class="nt">&lt;join/&gt;</span>
           <span class="nt">&lt;role&gt;</span>Remix, Arranged By<span class="nt">&lt;/role&gt;</span>
           <span class="nt">&lt;tracks/&gt;</span>
         <span class="nt">&lt;/artist&gt;</span>
       <span class="nt">&lt;/extraartists&gt;</span>
     <span class="nt">&lt;/track&gt;</span>
     <span class="nt">&lt;track&gt;</span>
       <span class="nt">&lt;position&gt;</span>A2<span class="nt">&lt;/position&gt;</span>
       <span class="nt">&lt;title&gt;</span>Pure (Jay&#39;s Original Vocal)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;duration&gt;</span>4:30<span class="nt">&lt;/duration&gt;</span>
       <span class="nt">&lt;extraartists&gt;</span>
         <span class="nt">&lt;artist&gt;</span>
           <span class="nt">&lt;id&gt;</span>209463<span class="nt">&lt;/id&gt;</span>
           <span class="nt">&lt;name&gt;</span>David Boonshoft<span class="nt">&lt;/name&gt;</span>
           <span class="nt">&lt;anv&gt;</span>D. Boonshoft<span class="nt">&lt;/anv&gt;</span>
           <span class="nt">&lt;join/&gt;</span>
           <span class="nt">&lt;role&gt;</span>Bass<span class="nt">&lt;/role&gt;</span>
           <span class="nt">&lt;tracks/&gt;</span>
         <span class="nt">&lt;/artist&gt;</span>
         <span class="nt">&lt;artist&gt;</span>
           <span class="nt">&lt;id&gt;</span>352023<span class="nt">&lt;/id&gt;</span>
           <span class="nt">&lt;name&gt;</span>Mark Anthony Jones<span class="nt">&lt;/name&gt;</span>
           <span class="nt">&lt;anv&gt;</span>Mark Anthony &#39;thefunkiestmanalive&#39; Jones<span class="nt">&lt;/anv&gt;</span>
           <span class="nt">&lt;join/&gt;</span>
           <span class="nt">&lt;role&gt;</span>Guitar, Backing Vocals<span class="nt">&lt;/role&gt;</span>
           <span class="nt">&lt;tracks/&gt;</span>
         <span class="nt">&lt;/artist&gt;</span>
       <span class="nt">&lt;/extraartists&gt;</span>
     <span class="nt">&lt;/track&gt;</span>
     <span class="nt">&lt;track&gt;</span>
       <span class="nt">&lt;position&gt;</span>B1<span class="nt">&lt;/position&gt;</span>
       <span class="nt">&lt;title&gt;</span>Pure (Aquanote Tidal Mix)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;duration&gt;</span>6:50<span class="nt">&lt;/duration&gt;</span>
       <span class="nt">&lt;extraartists&gt;</span>
         <span class="nt">&lt;artist&gt;</span>
           <span class="nt">&lt;id&gt;</span>38<span class="nt">&lt;/id&gt;</span>
           <span class="nt">&lt;name&gt;</span>Aquanote<span class="nt">&lt;/name&gt;</span>
           <span class="nt">&lt;anv/&gt;</span>
           <span class="nt">&lt;join/&gt;</span>
           <span class="nt">&lt;role&gt;</span>Remix, Arranged By<span class="nt">&lt;/role&gt;</span>
           <span class="nt">&lt;tracks/&gt;</span>
         <span class="nt">&lt;/artist&gt;</span>
       <span class="nt">&lt;/extraartists&gt;</span>
     <span class="nt">&lt;/track&gt;</span>
     <span class="nt">&lt;track&gt;</span>
       <span class="nt">&lt;position&gt;</span>B2<span class="nt">&lt;/position&gt;</span>
       <span class="nt">&lt;title&gt;</span>Pure (Jay&#39;s Undercover Dub)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;duration&gt;</span>6:45<span class="nt">&lt;/duration&gt;</span>
       <span class="nt">&lt;extraartists&gt;</span>
         <span class="nt">&lt;artist&gt;</span>
           <span class="nt">&lt;id&gt;</span>32<span class="nt">&lt;/id&gt;</span>
           <span class="nt">&lt;name&gt;</span>Jay Denes<span class="nt">&lt;/name&gt;</span>
           <span class="nt">&lt;anv&gt;</span>J. Denes<span class="nt">&lt;/anv&gt;</span>
           <span class="nt">&lt;join/&gt;</span>
           <span class="nt">&lt;role&gt;</span>Remix, Arranged By<span class="nt">&lt;/role&gt;</span>
           <span class="nt">&lt;tracks/&gt;</span>
         <span class="nt">&lt;/artist&gt;</span>
       <span class="nt">&lt;/extraartists&gt;</span>
     <span class="nt">&lt;/track&gt;</span>
   <span class="nt">&lt;/tracklist&gt;</span>
   <span class="nt">&lt;identifiers&gt;</span>
     <span class="nt">&lt;identifier</span> <span class="na">type=</span><span class="s">&quot;Matrix / Runout&quot;</span> <span class="na">description=</span><span class="s">&quot;Side A, hand-etched runout&quot;</span> <span class="na">value=</span><span class="s">&quot;NM-008 A1&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;identifier</span> <span class="na">type=</span><span class="s">&quot;Matrix / Runout&quot;</span> <span class="na">description=</span><span class="s">&quot;Side B, hand-etched runout&quot;</span> <span class="na">value=</span><span class="s">&quot;NM-008 B1&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;identifier</span> <span class="na">type=</span><span class="s">&quot;Rights Society&quot;</span> <span class="na">value=</span><span class="s">&quot;BMI&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;identifier</span> <span class="na">type=</span><span class="s">&quot;Rights Society&quot;</span> <span class="na">value=</span><span class="s">&quot;ASCAP&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/identifiers&gt;</span>
   <span class="nt">&lt;videos&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=rFRvw6zyo3o&quot;</span> <span class="na">duration=</span><span class="s">&quot;1525&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Blue Six Pure Full 12<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description/&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=LMSX1uj-Kqc&quot;</span> <span class="na">duration=</span><span class="s">&quot;403&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Blue Six - Pure (Jay&#39;s Undercover Dub)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description&gt;</span>Blue Six - Pure (Jay&#39;s Undercover Dub)<span class="nt">&lt;/description&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=8JfXGlYGMJ8&quot;</span> <span class="na">duration=</span><span class="s">&quot;421&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Blue Six - Pure (MIX)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description/&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=i-8CY8MIfDk&quot;</span> <span class="na">duration=</span><span class="s">&quot;411&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Blue Six feat. Monique Bingham - Pure (Aquanote Tidal Remix)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description&gt;</span>Naked Music Recordings, Blue Six &#39;&#39;Pure EP&#39;&#39;<span class="ni">&amp;#13;</span>
 http://www.naked-music.com/<span class="nt">&lt;/description&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=E2aC_4dpENw&quot;</span> <span class="na">duration=</span><span class="s">&quot;406&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Blue Six - Pure<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description&gt;</span>Naked Music track &#39;Pure&#39; by Blue Six on the album &#39;Beautiful tomorrow.&#39;<span class="nt">&lt;/description&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=yP6j82i_nIA&quot;</span> <span class="na">duration=</span><span class="s">&quot;405&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Blue Six - Pure (Jay&#39;s Undercover Dub Mix) (LQ)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description/&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=QgMkMxhmER4&quot;</span> <span class="na">duration=</span><span class="s">&quot;403&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Blue Six   Pure Jay&#39;s Undercover Dub<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description/&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=6-WJzcAa-vY&quot;</span> <span class="na">duration=</span><span class="s">&quot;334&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Blue Six   Pure<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description&gt;</span>Album: Nude Dimensions-Volume2<span class="nt">&lt;/description&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
     <span class="nt">&lt;video</span> <span class="na">src=</span><span class="s">&quot;https://www.youtube.com/watch?v=MTJnClmcjgY&quot;</span> <span class="na">duration=</span><span class="s">&quot;289&quot;</span> <span class="na">embed=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;title&gt;</span>Pure (Remix)<span class="nt">&lt;/title&gt;</span>
       <span class="nt">&lt;description&gt;</span>Provided to YouTube by Universal Music Group<span class="nt">&lt;/description&gt;</span>
     <span class="nt">&lt;/video&gt;</span>
   <span class="nt">&lt;/videos&gt;</span>
   <span class="nt">&lt;companies&gt;</span>
     <span class="nt">&lt;company&gt;</span>
       <span class="nt">&lt;id&gt;</span>272720<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Naked Music NYC Recordings, LLC<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;catno/&gt;</span>
       <span class="nt">&lt;entity_type&gt;</span>13<span class="nt">&lt;/entity_type&gt;</span>
       <span class="nt">&lt;entity_type_name&gt;</span>Phonographic Copyright (p)<span class="nt">&lt;/entity_type_name&gt;</span>
       <span class="nt">&lt;resource_url&gt;</span>https://api.discogs.com/labels/272720<span class="nt">&lt;/resource_url&gt;</span>
     <span class="nt">&lt;/company&gt;</span>
     <span class="nt">&lt;company&gt;</span>
       <span class="nt">&lt;id&gt;</span>272720<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Naked Music NYC Recordings, LLC<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;catno/&gt;</span>
       <span class="nt">&lt;entity_type&gt;</span>14<span class="nt">&lt;/entity_type&gt;</span>
       <span class="nt">&lt;entity_type_name&gt;</span>Copyright (c)<span class="nt">&lt;/entity_type_name&gt;</span>
       <span class="nt">&lt;resource_url&gt;</span>https://api.discogs.com/labels/272720<span class="nt">&lt;/resource_url&gt;</span>
     <span class="nt">&lt;/company&gt;</span>
     <span class="nt">&lt;company&gt;</span>
       <span class="nt">&lt;id&gt;</span>272719<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Fur <span class="ni">&amp;amp;</span> Femur Music<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;catno/&gt;</span>
       <span class="nt">&lt;entity_type&gt;</span>21<span class="nt">&lt;/entity_type&gt;</span>
       <span class="nt">&lt;entity_type_name&gt;</span>Published By<span class="nt">&lt;/entity_type_name&gt;</span>
       <span class="nt">&lt;resource_url&gt;</span>https://api.discogs.com/labels/272719<span class="nt">&lt;/resource_url&gt;</span>
     <span class="nt">&lt;/company&gt;</span>
     <span class="nt">&lt;company&gt;</span>
       <span class="nt">&lt;id&gt;</span>727314<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>M. Bingham<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;catno/&gt;</span>
       <span class="nt">&lt;entity_type&gt;</span>21<span class="nt">&lt;/entity_type&gt;</span>
       <span class="nt">&lt;entity_type_name&gt;</span>Published By<span class="nt">&lt;/entity_type_name&gt;</span>
       <span class="nt">&lt;resource_url&gt;</span>https://api.discogs.com/labels/727314<span class="nt">&lt;/resource_url&gt;</span>
     <span class="nt">&lt;/company&gt;</span>
     <span class="nt">&lt;company&gt;</span>
       <span class="nt">&lt;id&gt;</span>355338<span class="nt">&lt;/id&gt;</span>
       <span class="nt">&lt;name&gt;</span>Moulton Studios<span class="nt">&lt;/name&gt;</span>
       <span class="nt">&lt;catno/&gt;</span>
       <span class="nt">&lt;entity_type&gt;</span>24<span class="nt">&lt;/entity_type&gt;</span>
       <span class="nt">&lt;entity_type_name&gt;</span>Engineered At<span class="nt">&lt;/entity_type_name&gt;</span>
       <span class="nt">&lt;resource_url&gt;</span>https://api.discogs.com/labels/355338<span class="nt">&lt;/resource_url&gt;</span>
     <span class="nt">&lt;/company&gt;</span>
   <span class="nt">&lt;/companies&gt;</span>
 <span class="nt">&lt;/release&gt;</span>
</pre></div>
</div>




</article>
<article class="slide level-2" id="prior-work">

<h2>Prior work</h2>





</article>
<article class="slide level-3" id="disco-graph-2015">

<h3>Disco/graph (2015)</h3>

<ul class="simple">
<li>Flask, d3, PostgreSQL</li>
<li>Graph database implemented by hand</li>
<li>Visualizes connections between entities</li>
<li>But loses information about “where” connections occurred</li>
</ul>




</article>
<article class="slide level-3" id="id9">

<h3>Disco/graph (2015)</h3>

<br/>
<div style="padding:62.5% 0 0 0;position:relative;">
    <iframe
        src="https://player.vimeo.com/video/138564453?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&amp;h=8d2543f5db"
        frameborder="0"
        allow="autoplay; fullscreen; picture-in-picture"
        allowfullscreen
        style="position:absolute;top:0;left:0;width:100%;height:100%;"
        title="discoGraph demo #2: From Morris Day to Björk"
    >
    </iframe>
</div>
<script src="https://player.vimeo.com/api/player.js"></script>



</article>
<article class="slide level-2" id="fast-forward-to-2020">

<h2>Fast forward to 2020</h2>





</article>
<article class="slide level-3" id="https-on-exactitude-in-science">

<h3><a class="reference external" href="https://on-exactitude-in.science">https://on-exactitude-in.science</a></h3>

<ul class="simple">
<li>Happy quarantine!</li>
<li>Time to revisit the 2015 project</li>
<li>Let’s use a modern stack</li>
<li>Let’s use a proper graph database</li>
<li>Let’s do it in 3D</li>
<li>Let’s provide maximum granularity</li>
</ul>




</article>
<article class="slide level-3" id="on-exactitude-in-science">

<h3>On Exactitude In Science</h3>

<p>Jorge Luis Borges:</p>
<blockquote>
<div><p>… In that Empire, the Art of Cartography attained such Perfection that the
map of a single Province occupied the entirety of a City, and the map of the
Empire, the entirety of a Province.</p>
<p>In time, those Unconscionable Maps no longer satisfied, and the
Cartographers Guilds struck a Map of the Empire whose size was that of the
Empire, and which coincided point for point with it.</p>
<p>The following Generations, who were not so fond of the Study of Cartography
as their Forebears had been, saw that that vast Map was Useless, and not
without some Pitilessness was it, that they delivered it up to the
Inclemencies of Sun and Winters.</p>
<p>In the Deserts of the West, still today, there are Tattered Ruins of that
Map, inhabited by Animals and Beggars; in all the Land there is no other
Relic of the Disciplines of Geography.</p>
</div></blockquote>




</article>
<article class="slide level-2" id="demo">

<h2>Demo</h2>





</article>
<article class="slide level-2" id="implementation">

<h2>Implementation</h2>





</article>
<article class="slide level-3" id="stack">

<h3>Stack</h3>

<ul class="simple">
<li>Kubernetes</li>
<li>JanusGraph, Scylla, Elasticsearch</li>
<li>aiohttp, aiogremlin</li>
<li>React, Redux, Material UI</li>
<li>d3, three.js</li>
</ul>




</article>
<article class="slide level-3" id="wait-what-s-a-graph-database">

<h3>Wait, what’s a graph database?</h3>

<ul class="simple">
<li>Efficient store for vertices and edges</li>
<li>Often NoSQL</li>
<li>Use domain specific query languages (Cypher, Gremlin)</li>
<li>Neo4J, JanusGraph, DSE Graph</li>
<li>IBM Graph, AWS Azure</li>
</ul>




</article>
<article class="slide level-3" id="gremlin">

<h3>Gremlin</h3>

<p>Gremlin describes “programs” for traversing graphs.</p>
<q>
Gremlin is the graph traversal language of Apache TinkerPop. Gremlin is a
functional, data-flow language that enables users to succinctly express complex
traversals on (or queries of) their application’s property graph.</q>
<p><a class="reference external" href="https://tinkerpop.apache.org/gremlin.html">https://tinkerpop.apache.org/gremlin.html</a></p>
<p>—</p>
<p>What are the names of Josiah’s friends’ friends?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">V</span><span class="p">()</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;Josiah&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">out</span><span class="p">(</span><span class="s2">&quot;knows&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">out</span><span class="p">(</span><span class="s2">&quot;knows&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
</pre></div>
</div>




</article>
<article class="slide level-3" id="querying">

<h3>Querying</h3>

<ul class="simple">
<li>Extract a “subgraph” from the wider graph</li>
<li>Centered on a single vertex</li>
<li>Loop, expanding out to unvisited vertices</li>
<li>Where the vertices and edges encountered fulfill filter requirements</li>
<li>Paging the first iteration of the loop</li>
<li>Limiting non-center edges to ~10 per vertex</li>
<li>And avoid traversing “supernodes”</li>
<li>Stop after encountering “enough” vertices</li>
</ul>




</article>
<article class="slide level-3" id="querying-iteration-0">

<h3>Querying: Iteration 0</h3>

<div align="center" class="align-center"><div class="graphviz"><img src="_images/graphviz-9a7d31caff61d24372a121740a0e55b6fd5f5b83.png" alt="digraph G {
     a
 }" class="graphviz" /></div>
</div>




</article>
<article class="slide level-3" id="querying-iteration-1">

<h3>Querying: Iteration 1</h3>

<div align="center" class="align-center"><div class="graphviz"><img src="_images/graphviz-a0da897af4d880dc243f88369731c89217899dab.png" alt="digraph G {
     graph [overlap=prism];
     a -&gt; b
     a -&gt; c
     a -&gt; d
     a -&gt; e
 }" class="graphviz" /></div>
</div>




</article>
<article class="slide level-3" id="querying-iteration-2">

<h3>Querying: Iteration 2</h3>

<div align="center" class="align-center"><div class="graphviz"><img src="_images/graphviz-1c48c3c03eb42b7959f7f5d49c66b26235fa512a.png" alt="digraph G {
     graph [overlap=prism];
     a -&gt; b
     a -&gt; c
     a -&gt; d
     a -&gt; e
     b -&gt; f
     c -&gt; g
     c -&gt; h
     d -&gt; i
     d -&gt; j
     d -&gt; k
     d -&gt; l
 }" class="graphviz" /></div>
</div>




</article>
<article class="slide level-3" id="querying-iteration-3">

<h3>Querying: Iteration 3</h3>

<div align="center" class="align-center"><div class="graphviz"><img src="_images/graphviz-f497e950de8fbc78b3857d6bc51746ded1464b7e.png" alt="digraph G {
     graph [overlap=prism];
     a -&gt; b
     a -&gt; c
     a -&gt; d
     a -&gt; e
     b -&gt; f
     c -&gt; g
     c -&gt; h
     d -&gt; i
     d -&gt; j
     d -&gt; k
     d -&gt; l
     f -&gt; h
     f -&gt; i
     g -&gt; i
     h -&gt; m
     h -&gt; n
     h -&gt; o
     i -&gt; m
     i -&gt; p
     i -&gt; q
     i -&gt; r
     i -&gt; s
     i -&gt; t
     j -&gt; m
     j -&gt; u
     j -&gt; v
     k -&gt; w
     l -&gt; x
     l -&gt; y
     l -&gt; z
 }" class="graphviz" /></div>
</div>




</article>
<article class="slide level-2" id="what-could-go-wrong">

<h2>What could go wrong?</h2>





</article>
<article class="slide level-2" id="gui-performance">

<h2>GUI Performance</h2>





</article>
<article class="slide level-3" id="physics-engine">

<h3>Physics engine</h3>

<ul class="simple">
<li>Force directed graphs model an n-body problem</li>
<li>Different techniques for solving n-body</li>
</ul>




</article>
<article class="slide level-3" id="barnes-hut-approximation">

<h3>Barnes-Hut approximation</h3>

<ul class="simple">
<li>O(n log n) complexity</li>
<li>Uses an octree datastructure for aggregating distant nodes</li>
<li>Nice framerate (20-25fps)</li>
<li><em>But</em>, suffers from large stop-the-world garbage collections</li>
</ul>




</article>
<article class="slide level-3" id="id10">

<h3>Barnes-Hut approximation</h3>

<div class="figure align-default">
<img alt="_images/timing-barnes-hut.png" class="fill" src="_images/timing-barnes-hut.png" />
</div>




</article>
<article class="slide level-3" id="id11">

<h3>Barnes-Hut approximation</h3>

<div class="figure align-default">
<img alt="_images/timing-barnes-hut-gc.png" class="fill" src="_images/timing-barnes-hut-gc.png" />
</div>




</article>
<article class="slide level-3" id="what-about-gpus">

<h3>What about GPUs?</h3>

<ul class="simple">
<li>Hypothetically fast</li>
<li>Unstable, can hard-crash Chrome</li>
<li>Cutting edge, probably not supported in all browsers</li>
<li>Too much time spent transferring data on/off of GPU</li>
</ul>




</article>
<article class="slide level-3" id="a-naive-approach">

<h3>A naive approach</h3>

<ul class="simple">
<li>Stupid simple, brute force, nothing to allocate</li>
<li>O(n^2) complexity</li>
<li>Slightly slower framerate than Barnes-Hut (25-30fps) given the number of nodes displayed</li>
<li>Obviously degrades considerably at larger node counts</li>
<li>Smaller GCs, stop-the-world is rare</li>
</ul>




</article>
<article class="slide level-3" id="id12">

<h3>A naive approach</h3>

<div class="figure align-default">
<img alt="_images/timing-naive.png" class="fill" src="_images/timing-naive.png" />
</div>




</article>
<article class="slide level-3" id="id13">

<h3>A naive approach</h3>

<div class="figure align-default">
<img alt="_images/timing-naive-gc.png" class="fill" src="_images/timing-naive-gc.png" />
</div>




</article>
<article class="slide level-3" id="what-to-do">

<h3>What to do?</h3>

<ul class="simple">
<li>Octree is fastest, except during GC</li>
<li>Reimplement Barnes-Hut / Octree</li>
<li>Pre-allocate all octree nodes</li>
<li>Avoid GC</li>
<li>Possibly use WASM to guarantee simplest octree implementation</li>
</ul>




</article>
<article class="slide level-2" id="api-performance">

<h2>API Performance</h2>





</article>
<article class="slide level-3" id="query-optimization">

<h3>Query optimization</h3>

<ul class="simple">
<li>The “neighborhood” query is complex</li>
<li>Adding additional filters can make it unresponsive</li>
<li>What can be optimized? What can’t?</li>
</ul>




</article>
<article class="slide level-3" id="property-graphs">

<h3>Property graphs</h3>

<ul class="simple">
<li>JanusGraph implements a “property” graph</li>
<li>Vertices and edges have labels, and potentially properties</li>
<li>Vertex properties may be scalars or collections</li>
<li>Edge properties must <em>only</em> be scalar</li>
</ul>




</article>
<article class="slide level-3" id="data-representation">

<h3>Data representation</h3>

<ul class="simple">
<li>There is no separate table for edges and vertices</li>
<li>Vertices store their edges <em>on themselves</em></li>
<li>That means edges exist on both incoming and outgoing vertices</li>
<li>Stored edged include any edge properties</li>
<li>Vertices are looked up by ID</li>
<li>Edges provide the ID of the other vertex</li>
<li>Each vertex lookup is a read against the storage backend</li>
</ul>




</article>
<article class="slide level-3" id="id14">

<h3>Data representation</h3>

<p>Data layout:</p>
<img alt="_images/jg-storagelayout.png" src="_images/jg-storagelayout.png" />
<p>Individual edge layout:</p>
<img alt="_images/jg-relationlayout.png" src="_images/jg-relationlayout.png" />




</article>
<article class="slide level-3" id="indices">

<h3>Indices</h3>

<ul class="simple">
<li>JanusGraph implements multiple types of indices</li>
<li>“Composite” indices index vertices in the storage backend (e.g. a Cassandra
column index)</li>
<li>“Mixed” indices index vertices in the “index” backend (e.g. full text search
in Elasticsearch)</li>
<li>“Vertex-centric” index the edges attached to a vertex</li>
<li>“Vertex-centric” indices exist on the vertices themselves</li>
<li>Those indices can only index edge properties, not the vertex properties of
the opposite vertex</li>
<li>“Vertex-centric” indices speed-up edge lookups, can limit vertex reads but
not speed them up</li>
</ul>




</article>
<article class="slide level-3" id="examples">

<h3>Examples</h3>

<ul class="simple">
<li>Find the neighborhood where all releases or tracks are post-1990</li>
<li>Find the neighborhood where all releases or tracks are vinyl-only</li>
</ul>




</article>
<article class="slide level-3" id="schema">

<h3>Schema</h3>

<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Artist</span><span class="p">(</span><span class="n">Vertex</span><span class="p">):</span>
    <span class="n">artist_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Company</span><span class="p">(</span><span class="n">Vertex</span><span class="p">):</span>
    <span class="n">company_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Master</span><span class="p">(</span><span class="n">Vertex</span><span class="p">):</span>
    <span class="n">master_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</pre></div>
</div>




</article>
<article class="slide level-3" id="id15">

<h3>Schema</h3>

<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Release</span><span class="p">(</span><span class="n">Vertex</span><span class="p">):</span>
    <span class="n">country</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">formats</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">genres</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">primacy</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">release_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">styles</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">videos</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">year</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Track</span><span class="p">(</span><span class="n">Vertex</span><span class="p">):</span>
    <span class="n">track_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="o">...</span>
</pre></div>
</div>




</article>
<article class="slide level-3" id="id16">

<h3>Schema</h3>

<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Relationship</span><span class="p">(</span><span class="n">Edge</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">primacy</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>
</div>




</article>
<article class="slide level-3" id="reads">

<h3>Reads</h3>

<ul class="simple">
<li>Filtering on many vertex properties requires reading those vertices from the
storage backend</li>
</ul>




</article>
<article class="slide level-3" id="denormalization">

<h3>Denormalization</h3>

<ul class="simple">
<li>Common scalar properties can be denormalized as edge properties<ul>
<li>e.g. year, country, even pairs of vertex labels</li>
</ul>
</li>
<li>Not all vertices share such properties, but dummy values are possible<ul>
<li>e.g. artists do not have a year or country</li>
</ul>
</li>
<li>However, non-scalars cannot be denormalized as edge properties</li>
<li>Non-scalars must be looked-up on the other vertex, forcing an additional read</li>
</ul>




</article>
<article class="slide level-3" id="solutions">

<h3>Solutions?</h3>

<ul class="simple">
<li>Bigger vertex cache in JanusGraph?</li>
<li>Precompute bitmasks of vertex collections as edge properties?</li>
<li>Limit filtering? Just forbid it?</li>
<li>Get a bigger budget? More or bigger Scylla instances?</li>
</ul>




</article>
<article class="slide level-2" id="thanks-for-listening">

<h2>Thanks for listening!</h2>





</article>

</section>

<section id="slide_notes">

</section>

  </body>
</html>